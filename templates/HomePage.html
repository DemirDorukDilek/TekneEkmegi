{% extends "base.html" %}

{% block title %}Ana Sayfa Â· Tekne EkmeÄŸi{% endblock %}

{% block content %}
<div class="card">
    <h1>Ana Sayfa</h1>
    <p class="subtitle">Tekne EkmeÄŸi ile sipariÅŸ verebilmek iÃ§in aÅŸaÄŸÄ±daki restoranlarÄ± kullanabilirsin.</p>

    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    {% for category, message in messages %}
    <div class="flash-message flash-{{ category }}">{{ message }}</div>
    {% endfor %}
    {% endif %}
    {% endwith %}

    <h2 style="margin: 10px 0 6px;">SeÃ§ili adresim</h2>

    {% if selected_adres %}
    <p style="font-size: 13px; margin-bottom: 14px;">
        <strong>{{ selected_adres[0] }}</strong> â€“
        {{ selected_adres[3] }} Mah., {{ selected_adres[4] }} Cd.,
        {{ selected_adres[5] }}/{{ selected_adres[6] }} â€“
        {{ selected_adres[2] }}/{{ selected_adres[1] }}
    </p>
    {% else %}

    <p class="subtitle">
        SeÃ§ili bir adresin yok. LÃ¼tfen saÄŸ Ã¼stteki ğŸ‘¤ ikonuna tÄ±klayÄ±p adreslerinden birini seÃ§.
    </p>
    {% endif %}

    <hr style="margin: 16px 0; border: 0; border-top: 1px solid #4a3b2b;">

    <h2 style="margin-bottom: 8px;">YakÄ±ndaki Restoranlar</h2>

    {% if restoranlar %}
    <div class="restaurant-list">
        {% for row in restoranlar %}
        {# row: (restoranID, EfendiID, distSqr) #}
        <form action="/RestoranSecildi" method="post" class="restaurant-card">
            <input type="hidden" name="restoranID" value="{{ row[0] }}">

            <div class="restaurant-card-info">
                <div class="restaurant-name">Restoran #{{ row[0] }}</div>
                <div class="restaurant-meta">
                    Mesafe (kare): {{ row[2] }}
                </div>
            </div>

            <button type="submit" class="btn btn-secondary btn-sm">
                SeÃ§
            </button>
        </form>
        {% endfor %}
    </div>
    {% else %}
    <p class="subtitle">YakÄ±nÄ±nda restoran bulunamadÄ±.</p>
    {% endif %}

    <form action="/HomePage-Sepetbutton" method="post">
        <button type="submit" class="btn btn-primary">Sepete Git</button>
    </form>

    <form action="/addAdress" method="get">
        <button type="submit" class="btn btn-secondary">Yeni Adres Ekle</button>
    </form>
</div>
{% endblock %}