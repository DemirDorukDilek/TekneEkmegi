{% extends "base.html" %}

{% block title %}Ana Sayfa · Tekne Ekmeği{% endblock %}

{% block content %}

{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
{% for category, message in messages %}
<div class="flash-message flash-{{ category }}">{{ message }}</div>
{% endfor %}
{% endif %}
{% endwith %}

<h2 style="margin: 0 0 8px;">Yakındaki Restoranlar</h2>

{% if restoranlar %}
<div class="restaurant-list">
    {% for row in restoranlar %}
    {# row: (restoranID, EfendiID, distSqr) #}
    <form action="/restoran/{{row[0]}}" method="get" class="restaurant-card">
        <input type="hidden" name="restoranID" value="{{ row[0] }}">

        <div class="restaurant-card-info">
            <div class="restaurant-name">Restoran {{ row[3] }}</div>
            <div class="restaurant-meta">
                Mesafe: {{ row[2] }}
            </div>
        </div>

        <button type="submit" class="btn btn-secondary btn-sm">
            Seç
        </button>
    </form>
    {% endfor %}
</div>
{% else %}
<p class="subtitle">Yakınında restoran bulunamadı.</p>
{% endif %}

{% endblock %}